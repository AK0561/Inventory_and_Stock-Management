{"ast":null,"code":"var _jsxFileName = \"/Users/arnav/Desktop/pinvent-app/frontend/src/pages/editProduct/EditProduct.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport Loader from \"../../components/loader/Loader\";\nimport ProductForm from \"../../components/product/productForm/ProductForm\";\nimport { getProduct, getProducts, selectIsLoading, selectProduct, updateProduct } from \"../../redux/features/product/productSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst EditProduct = () => {\n  _s();\n\n  const {\n    id\n  } = useParams();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const isLoading = useSelector(selectIsLoading);\n  const productEdit = useSelector(selectProduct);\n  const [product, setProduct] = useState(productEdit);\n  const [productImage, setProductImage] = useState(\"\");\n  const [imagePreview, setImagePreview] = useState(null);\n  const [description, setDescription] = useState(\"\");\n  useEffect(() => {\n    dispatch(getProduct(id));\n  }, [dispatch, id]);\n  useEffect(() => {\n    setProduct(productEdit);\n    setImagePreview(productEdit && productEdit.image ? `${productEdit.image.filePath}` : null);\n    setDescription(productEdit && productEdit.description ? productEdit.description : \"\");\n  }, [productEdit]);\n\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setProduct({ ...product,\n      [name]: value\n    });\n  };\n\n  const handleImageChange = e => {\n    setProductImage(e.target.files[0]);\n    setImagePreview(URL.createObjectURL(e.target.files[0]));\n  };\n\n  const saveProduct = async e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"name\", product === null || product === void 0 ? void 0 : product.name);\n    formData.append(\"category\", product === null || product === void 0 ? void 0 : product.category);\n    formData.append(\"quantity\", product === null || product === void 0 ? void 0 : product.quantity);\n    formData.append(\"price\", product === null || product === void 0 ? void 0 : product.price);\n    formData.append(\"description\", description);\n\n    if (productImage) {\n      formData.append(\"image\", productImage);\n    }\n\n    console.log(...formData);\n    await dispatch(updateProduct({\n      id,\n      formData\n    }));\n    await dispatch(getProducts());\n    navigate(\"/dashboard\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [isLoading && /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"--mt\",\n      children: \"Edit Product\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ProductForm, {\n      product: product,\n      productImage: productImage,\n      imagePreview: imagePreview,\n      description: description,\n      setDescription: setDescription,\n      handleInputChange: handleInputChange,\n      handleImageChange: handleImageChange,\n      saveProduct: saveProduct\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n\n_s(EditProduct, \"cGMbwuVempCvGjuQeHHhZ5k41Xw=\", false, function () {\n  return [useParams, useDispatch, useNavigate, useSelector, useSelector];\n});\n\n_c = EditProduct;\nexport default EditProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"EditProduct\");","map":{"version":3,"names":["React","useEffect","useState","useDispatch","useSelector","useNavigate","useParams","Loader","ProductForm","getProduct","getProducts","selectIsLoading","selectProduct","updateProduct","EditProduct","id","dispatch","navigate","isLoading","productEdit","product","setProduct","productImage","setProductImage","imagePreview","setImagePreview","description","setDescription","image","filePath","handleInputChange","e","name","value","target","handleImageChange","files","URL","createObjectURL","saveProduct","preventDefault","formData","FormData","append","category","quantity","price","console","log"],"sources":["/Users/arnav/Desktop/pinvent-app/frontend/src/pages/editProduct/EditProduct.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport Loader from \"../../components/loader/Loader\";\nimport ProductForm from \"../../components/product/productForm/ProductForm\";\nimport {\n  getProduct,\n  getProducts,\n  selectIsLoading,\n  selectProduct,\n  updateProduct,\n} from \"../../redux/features/product/productSlice\";\n\nconst EditProduct = () => {\n  const { id } = useParams();\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const isLoading = useSelector(selectIsLoading);\n\n  const productEdit = useSelector(selectProduct);\n\n  const [product, setProduct] = useState(productEdit);\n  const [productImage, setProductImage] = useState(\"\");\n  const [imagePreview, setImagePreview] = useState(null);\n  const [description, setDescription] = useState(\"\");\n\n  useEffect(() => {\n    dispatch(getProduct(id));\n  }, [dispatch, id]);\n\n  useEffect(() => {\n    setProduct(productEdit);\n\n    setImagePreview(\n      productEdit && productEdit.image ? `${productEdit.image.filePath}` : null\n    );\n\n    setDescription(\n      productEdit && productEdit.description ? productEdit.description : \"\"\n    );\n  }, [productEdit]);\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setProduct({ ...product, [name]: value });\n  };\n\n  const handleImageChange = (e) => {\n    setProductImage(e.target.files[0]);\n    setImagePreview(URL.createObjectURL(e.target.files[0]));\n  };\n\n  const saveProduct = async (e) => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"name\", product?.name);\n\n    formData.append(\"category\", product?.category);\n    formData.append(\"quantity\", product?.quantity);\n    formData.append(\"price\", product?.price);\n    formData.append(\"description\", description);\n    if (productImage) {\n      formData.append(\"image\", productImage);\n    }\n\n    console.log(...formData);\n\n    await dispatch(updateProduct({ id, formData }));\n    await dispatch(getProducts());\n    navigate(\"/dashboard\");\n  };\n\n  return (\n    <div>\n      {isLoading && <Loader />}\n      <h3 className=\"--mt\">Edit Product</h3>\n      <ProductForm\n        product={product}\n        productImage={productImage}\n        imagePreview={imagePreview}\n        description={description}\n        setDescription={setDescription}\n        handleInputChange={handleInputChange}\n        handleImageChange={handleImageChange}\n        saveProduct={saveProduct}\n      />\n    </div>\n  );\n};\n\nexport default EditProduct;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}